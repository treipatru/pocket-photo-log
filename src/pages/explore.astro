---
import { pocketClient } from "@/services/pocket/pocket-client";
import BlogLayout from "@/layouts/blog-layout.astro";
import Hero from "@/components/hero.astro";
import ExploreSection from "@/components/explore/explore-section";


const tags = await pocketClient.collection("tags_with_posts").getFullList({
	sort: "-post_count",
});
const years = await pocketClient.collection("posts_per_year").getFullList({
	sort: "-year",
});

const nonEmptyTags = tags.filter((tag) => tag.post_count && tag.post_count > 0);

const cameras = nonEmptyTags.filter((tag) => tag.name.startsWith("camera:"));
const countries = nonEmptyTags.filter((tag) => tag.name.startsWith("co:"));
const places = nonEmptyTags.filter((tag) => tag.name.startsWith("pl:"));
const sets = nonEmptyTags.filter((tag) => tag.name.startsWith("set:"));
const otherTags = nonEmptyTags.filter((tag) => !tag.name.match(/^\S+:\s/));
---

<BlogLayout>
	<Hero slot="hero" subtitle="explore" />

	<ExploreSection tags={nonEmptyTags} years={years} />
</BlogLayout>
