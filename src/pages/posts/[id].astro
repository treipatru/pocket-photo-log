---
import { pocketClient } from "@/services/pocket/pocket-client";
import PostLayout from "@/layouts/post-layout.astro";
import Hero from "@/components/hero.astro";
import TimelineItem from "@/components/posts/post.astro";

const id = Astro.params.id;

const post = await pocketClient
	.collection("posts")
	.getFirstListItem(`id="${id}"`, {
		expand: "tags",
	});

const postDate = new Date(post.shot_on || post.created).toLocaleDateString(
	"en-US",
	{
		year: "numeric",
		month: "long",
		day: "numeric",
	}
);
---

<PostLayout>
	<Hero slot="hero" subtitle={`on ${postDate}`} />

	<TimelineItem post={post} size="900x900f" isLink={false} />
</PostLayout>
